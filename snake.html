<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hiking Snake Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

  body {
    font-family: "Poppins", sans-serif;
    margin: 0;
    background: linear-gradient(to top, #f7f9fb, #d8dee4);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 0;
  }

  h1 {
    color: #6A7B8B;
    margin-bottom: 10px;
    font-weight: 600;
  }

  #gameContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    border-radius: 20px;
    background: #ffffff;
    box-shadow: 0 4px 20px rgba(106, 123, 139, 0.15);
  }

  canvas {
    border-radius: 12px;
    background: #D8DEE4;
    display: block;
    margin-bottom: 12px;
  }

  #score {
    color: #6A7B8B;
    font-weight: 500;
    margin-bottom: 6px;
  }

  #levelSelect {
    margin-bottom: 12px;
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid #6A7B8B;
    font-weight: 500;
  }
</style>
</head>
<body>

<h1>ðŸ¥¾ Hiking Snake</h1>

<div id="gameContainer">
  <select id="levelSelect">
    <option value="150">Trail (Easy)</option>
    <option value="100">Mountain (Medium)</option>
    <option value="60">Summit (Hard)</option>
  </select>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div id="score">Score: 0</div>
  <div id="badge"></div>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreText = document.getElementById("score");
const badgeDiv = document.getElementById("badge");
const levelSelect = document.getElementById("levelSelect");

const tileSize = 20;
let speed = parseInt(levelSelect.value);
let snake = [{x:200, y:200}];
let dx = tileSize, dy = 0;
let food = generateFood();
let score = 0;

// Track touch for mobile
let touchStartX = 0;
let touchStartY = 0;

function generateFood() {
  return {
    x: Math.floor(Math.random() * (canvas.width / tileSize)) * tileSize,
    y: Math.floor(Math.random() * (canvas.height / tileSize)) * tileSize
  };
}

function drawBackground() {
  ctx.fillStyle = "#D8DEE4"; // slate gray trail
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Draw simple mountains
  ctx.fillStyle = "#A0B0C0";
  ctx.beginPath();
  ctx.moveTo(0, canvas.height);
  ctx.lineTo(50, 200);
  ctx.lineTo(100, canvas.height);
  ctx.closePath();
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(100, canvas.height);
  ctx.lineTo(200, 150);
  ctx.lineTo(300, canvas.height);
  ctx.closePath();
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(250, canvas.height);
  ctx.lineTo(320, 180);
  ctx.lineTo(400, canvas.height);
  ctx.closePath();
  ctx.fill();
}

function drawSnake() {
  ctx.fillStyle = "#6A7B8B"; // hiker color
  snake.forEach((part, index)=>{
    ctx.fillRect(part.x, part.y, tileSize-1, tileSize-1);
    // small backpack as decoration
    if(index === 0){
      ctx.fillStyle = "#8FB1C7";
      ctx.fillRect(part.x+5, part.y+5, 10,10);
      ctx.fillStyle = "#6A7B8B";
    }
  });
}

function drawFood() {
  ctx.fillStyle = "#FFB347"; // trail marker
  ctx.beginPath();
  ctx.arc(food.x+tileSize/2, food.y+tileSize/2, 8, 0, Math.PI*2);
  ctx.fill();
}

function moveSnake() {
  const head = {x: snake[0].x + dx, y: snake[0].y + dy};
  snake.unshift(head);

  if(head.x === food.x && head.y === food.y){
    score++;
    scoreText.textContent = "Score: " + score;
    food = generateFood();
    updateBadge();
  } else {
    snake.pop();
  }
}

function updateBadge(){
  let badge = "";
  if(score < 5) badge = "ðŸ•ï¸ Campsite";
  else if(score < 10) badge = "â›°ï¸ Mountain Peak";
  else badge = "ðŸ” Summit!";
  badgeDiv.textContent = "Level: " + badge;
}

function checkCollision(){
  const head = snake[0];
  if(head.x <0 || head.x >= canvas.width || head.y <0 || head.y >= canvas.height) return true;
  for(let i=1;i<snake.length;i++){
    if(head.x === snake[i].x && head.y === snake[i].y) return true;
  }
  return false;
}

function updateGame(){
  drawBackground();
  moveSnake();
  if(checkCollision()){
    alert("Hike over! Your score: "+score);
    document.location.reload();
    return;
  }
  drawSnake();
  drawFood();
}

let gameInterval = setInterval(updateGame, speed);

// Keyboard controls
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp" && dy===0){ dx=0; dy=-tileSize; }
  if(e.key==="ArrowDown" && dy===0){ dx=0; dy=tileSize; }
  if(e.key==="ArrowLeft" && dx===0){ dx=-tileSize; dy=0; }
  if(e.key==="ArrowRight" && dx===0){ dx=tileSize; dy=0; }
});

// Mobile swipe controls
canvas.addEventListener("touchstart", e=>{
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
});
canvas.addEventListener("touchend", e=>{
  const touchEndX = e.changedTouches[0].clientX;
  const touchEndY = e.changedTouches[0].clientY;
  const dxSwipe = touchEndX - touchStartX;
  const dySwipe = touchEndY - touchStartY;
  if(Math.abs(dxSwipe) > Math.abs(dySwipe)){
    if(dxSwipe > 0 && dx === 0) { dx = tileSize; dy = 0; }
    else if(dxSwipe < 0 && dx ===0) { dx = -tileSize; dy=0; }
  } else {
    if(dySwipe >0 && dy ===0) { dx=0; dy=tileSize;}
    else if(dySwipe<0 && dy===0) { dx=0; dy=-tileSize;}
  }
});

// Level select
levelSelect.addEventListener("change", ()=>{
  speed = parseInt(levelSelect.value);
  clearInterval(gameInterval);
  gameInterval = setInterval(updateGame, speed);
});
</script>

</body>
</html>
